# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ Telegram Payments

## 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π

1. –ù–∞–ø–∏—à–∏—Ç–µ @BotFather –≤ Telegram
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí `Payments`
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Stripe, –ÆKassa, Sberbank –∏ –¥—Ä.)
5. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
6. –ü–æ–ª—É—á–∏—Ç–µ `provider_token`

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```env
BOT_TOKEN=–≤–∞—à_telegram_bot_token
TELEGRAM_PAYMENT_PROVIDER_TOKEN=–≤–∞—à_provider_token
```

## 3. –ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏

–ü–ª–∞–Ω—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `src/payment/payment.service.ts`:

```typescript
private readonly plans: PaymentPlan[] = [
  {
    id: 'basic_30',
    name: 'üü¢ –ë–∞–∑–æ–≤—ã–π',
    description: '30 –¥–Ω–µ–π VPN –¥–æ—Å—Ç—É–ø–∞',
    price: 19900, // 199 —Ä—É–±–ª–µ–π –≤ –∫–æ–ø–µ–π–∫–∞—Ö
    days: 30,
  },
  // ... –¥—Ä—É–≥–∏–µ –ø–ª–∞–Ω—ã
];
```

**–í–∞–∂–Ω–æ:** –¶–µ–Ω—ã —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –∫–æ–ø–µ–π–∫–∞—Ö!

## 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π provider_token –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–ª–∞—Ç–µ–∂–∞

## 5. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

Telegram Payments –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:

- **Stripe** - –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
- **–ÆKassa** - –¥–ª—è –†–æ—Å—Å–∏–∏
- **Sberbank** - –¥–ª—è –†–æ—Å—Å–∏–∏
- **Tranzzo** - –¥–ª—è –£–∫—Ä–∞–∏–Ω—ã
- **LiqPay** - –¥–ª—è –£–∫—Ä–∞–∏–Ω—ã
- **Payme** - –¥–ª—è –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞
- **Click** - –¥–ª—è –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞
- –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ

## 6. –ü—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–ª–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏
2. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç invoice —á–µ—Ä–µ–∑ Telegram API
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –ø—Ä—è–º–æ –≤ Telegram
4. Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `pre_checkout_query`
5. –ë–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂
6. Telegram –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `successful_payment`
7. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É

## 7. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Telegram Payments

- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–∫–∏–¥–∞–µ—Ç Telegram
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–ª–∞—Ç–µ–∂–µ–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç Telegram
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç —Ñ—Ä–æ–¥–∞

## 8. –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π

- `/buy` - –ø–æ–∫–∞–∑–∞—Ç—å –ø–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏
- –ö–Ω–æ–ø–∫–∞ "üí∞ –ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
- –ö–Ω–æ–ø–∫–∞ "üí∞ –ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É" –≤ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö

## 9. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:

- –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
- –û—à–∏–±–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Å—Ä–µ–¥—Å—Ç–≤

## 10. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Telegram
- –ë–æ—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç
- Telegram –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## 11. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### –î–ª—è –ÆKassa:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ yookassa.ru
2. –ü–æ–ª—É—á–∏—Ç–µ shopId –∏ secretKey
3. –í @BotFather –≤—ã–±–µ—Ä–∏—Ç–µ –ÆKassa –∫–∞–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
4. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ credentials

### –î–ª—è Stripe:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ stripe.com
2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏
3. –í @BotFather –≤—ã–±–µ—Ä–∏—Ç–µ Stripe –∫–∞–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
4. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ credentials

## 12. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
- –£—Å–ø–µ—à–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –û—à–∏–±–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π —Ç–∞–∫–∂–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

## 13. –ë–æ–µ–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. –ü–æ–ª—É—á–∏—Ç–µ –±–æ–µ–≤–æ–π provider_token
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–ª–∞—Ç–µ–∂–µ–π
